!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){"use strict";var b=a("./modules/map.js"),c=a("./modules/map-search.js"),d=a("./modules/table-nwAve.js"),e=window.location.pathname.split("\\").pop().split("/").pop().split(".")[0];window.GEOHOST="http://gisp-geosrv-tc-dev.us-west-2.elasticbeanstalk.com/fcc",""===e||"index"===e?window.page="deployment":window.page=e,"deployment"===window.page?$('[href="index.html"]').addClass("active"):$('[href="'+window.page+'.html"]').addClass("active"),$("#map").length>0&&(b.init(),c.init()),$("#table-nwAve").length>0&&d.getData()}()},{"./modules/map-search.js":12,"./modules/map.js":13,"./modules/table-nwAve.js":15}],2:[function(a,b,c){"use strict";var d={labels:["Urban","Rural"],datasets:[{data:[],backgroundColor:["#3D59D7","#71DAD6"]}]},e={create:function(a){var b,c=$("#chartDemog"),e=[];e.push(a.per_urbannofixed),e.push(a.per_ruralnofixed),d.datasets[0].data=e,$("#chartDemog").length>0&&(b=new Chart(c,{type:"doughnut",data:d,options:{responsive:!1,legend:{position:"bottom"}}}))}};b.exports=e},{}],3:[function(a,b,c){"use strict";var d={init:function(a){d.data={labels:["All","Urban","Rural","Tribal"],datasets:[{label:"Fixed",data:[],backgroundColor:"#FFE773"},{label:"No Fixed",data:[],backgroundColor:"#6CBCD5"}]},0!==$("#chartFixed").length&&a!==d.FIPS&&(d.FIPS=a,d.getCountyData(a))},getCountyData:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=fcc:bpr_dec2016_county_fnf&maxFeatures=100&outputFormat=application/json&cql_filter=county_fips=%27"+d.FIPS+"%27";$.ajax({type:"GET",url:a}).done(function(a){d.update(a),d.getURData()})},getURData:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_county_ur_fnf&maxFeatures=100&outputFormat=application/json&cql_filter=county_fips=%27"+d.FIPS+"%27";$.ajax({type:"GET",url:a}).done(function(a){d.processURData(a),d.getTribalData()})},getTribalData:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_county_tribal_fnf&maxFeatures=100&outputFormat=application/json&cql_filter=county_fips=%27"+d.FIPS+"%27";$.ajax({type:"GET",url:a}).done(function(a){d.update(a),d.display()})},processURData:function(a){var b=0,c=a.features.length,e={},f={};for(e.features=[],f.features=[],b;b<c;b++)switch(a.features[b].properties.urban_rural){case"U":e.features.push(a.features[b]);break;case"R":f.features.push(a.features[b])}d.update(e),d.update(f)},update:function(a){var b=0,c=d.data.datasets[0].data,e=d.data.datasets[1].data;if(0===a.features.length)return c.push(0),void e.push(0);for(b=0;b<a.features.length;b++)switch(a.features[b].properties.has_fixed){case 0:e.push(a.features[b].properties.pop_pct.toFixed(2)),100===a.features[b].properties.pop_pct&&c.push(0);break;case 1:c.push(a.features[b].properties.pop_pct.toFixed(2)),100===a.features[b].properties.pop_pct&&e.push(0)}},display:function(){var a;$("#chartFixed").replaceWith('<canvas id="chartFixed" width="350" height="255"></canvas>'),$(".chartjs-hidden-iframe").remove(),a=$("#chartFixed"),d.chart=new Chart(a,{type:"bar",data:d.data,options:{legend:{display:!1},maintainAspectRatio:!0,responsive:!0,scales:{xAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Area"}}],yAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Population"}}]},tooltips:{callbacks:{label:function(a,b){return b.datasets[a.datasetIndex].label+": "+a.yLabel+"%"}}}}})}};b.exports=d},{}],4:[function(a,b,c){"use strict";var d={data:{labels:["All","Urban","Rural","Tribal"],datasets:[{label:"Fixed",data:[],backgroundColor:"#FFE773"},{label:"No Fixed",data:[],backgroundColor:"#6CBCD5"}]},init:function(){0!==$("#chartNWFixed").length&&($(".sect-fixed").on("click",".link-nw",function(a){a.preventDefault(),$("#tabInstructs, #nwFixed").removeClass("hide"),$("#fixed, #provider, #demographics").addClass("hide"),$("#btn-nationLocation").click(),$(".search-field").find("input").val(""),d.data.datasets[0].data=[],d.data.datasets[1].data=[],d.getNWData()}),d.getNWData())},getNWData:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=fcc:bpr_dec2016_nw_fnf&maxFeatures=100&outputFormat=application/json";$.ajax({type:"GET",url:a,success:function(a){d.update(a),d.getUrbanData()}})},getUrbanData:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_nw_ur_fnf&maxFeatures=100&outputFormat=application/json";$.ajax({type:"GET",url:a,success:function(a){d.processURData(a),d.getTribal(a)}})},getTribal:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_nw_tribal_fnf&maxFeatures=100&outputFormat=application/json";$.ajax({type:"GET",url:a,success:function(a){d.update(a),d.display()}})},processURData:function(a){var b=0,c=a.features.length,e={},f={};for(e.features=[],f.features=[],b;b<c;b++)switch(a.features[b].properties.urban_rural){case"U":e.features.push(a.features[b]);break;case"R":f.features.push(a.features[b])}d.update(e),d.update(f)},update:function(a){var b=d.data.datasets[0].data,c=d.data.datasets[1].data;if(0===a.features.length)return b.push(0),void c.push(0);for(var e=0;e<a.features.length;e++)switch(a.features[e].properties.has_fixed){case 0:c.push(a.features[e].properties.pop_pct.toFixed(2)),100===a.features[e].properties.type_pop_pct&&b.push(0);break;case 1:b.push(a.features[e].properties.pop_pct.toFixed(2)),100===a.features[e].properties.type_pop_pct&&c.push(0)}},display:function(){var a;$("#chartNWFixed").replaceWith('<canvas id="chartNWFixed" width="350" height="255"></canvas>'),$(".chartjs-hidden-iframe").remove(),a=$("#chartNWFixed"),d.chart=new Chart(a,{type:"bar",data:d.data,options:{legend:{display:!1},maintainAspectRatio:!0,responsive:!0,scales:{xAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Area"}}],yAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Population"}}]},tooltips:{callbacks:{label:function(a,b){return b.datasets[a.datasetIndex].label+": "+a.yLabel+"%"}}}}})}};b.exports=d},{}],5:[function(a,b,c){"use strict";var d={init:function(a){d.data={labels:["0.2","10/1","25/3","50/5","100/10"],datasets:[{label:"0",backgroundColor:"#ffffcc",data:[]},{label:"1",backgroundColor:"#fdcc8a",data:[]},{label:"2",backgroundColor:"#fc8d59",data:[]},{label:"3",backgroundColor:"#d7301f",data:[]}]},0!==$("#chartSpeed").length&&a!==d.FIPS&&(d.FIPS=a,$(".sect-speed").on("click",".link-nw",function(){console.log(d.FIPS),d.init("nw"),$(".sect-speed").addClass("hide"),$(".sect-speedNW").removeClass("hide"),$("#btn-nationLocation").click()}),d.getTech())},getTech:function(){var a=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_refresh_county&maxFeatures=100&outputFormat=application/json&cql_filter=county_fips=%27"+d.FIPS+"%27",b=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_refresh_nation&maxFeatures=100&outputFormat=application/json";$.ajax({type:"GET",url:"nw"===d.FIPS?b:a,success:function(a){d.update(a),d.display()}})},update:function(a){function b(a){for(i=0;i<d.data.datasets.length;i++)g="speed_"+e[h]+"_"+i,f[i].data.push((100*c[g]).toFixed(2))}var c=a.features[0].properties,e=["200","10","25","50","100"],f=d.data.datasets,g="",h=0,i=0;for(h=0;h<e.length;h++)b(e)},display:function(){var a,b;"nw"===d.FIPS?(b="chartSpeedNW",$(".sect-speed").addClass("hide"),$(".sect-speedNW").removeClass("hide")):(b="chartSpeed",$(".sect-speed").removeClass("hide"),$(".sect-speedNW").addClass("hide")),$("#"+b).replaceWith('<canvas id="'+b+'" width="350" height="255"></canvas>'),$(".chartjs-hidden-iframe").remove(),a=$("#"+b),d.chart=new Chart(a,{type:"bar",data:d.data,options:{legend:{display:!1},maintainAspectRatio:!0,responsive:!0,scales:{xAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Speed (Mbps downstream/upstream)"}}],yAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"% Population"},ticks:{max:100,min:0,stepSize:20}}]},tooltips:{callbacks:{title:function(a,b){return"Speed: "+a[0].xLabel+"Mbps/1 Mbps"},label:function(a,b){return"# Providers: "+b.datasets[a.datasetIndex].label},afterLabel:function(a,b){return"Population: "+a.yLabel+"%"}}}}})}};b.exports=d},{}],6:[function(a,b,c){"use strict";var d={init:function(a){d.data={labels:["0","1","2","3"],datasets:[{label:"ADSL",backgroundColor:"rgba(255, 99, 132, 0.9)",data:[]},{label:"Cable",backgroundColor:"rgba(54, 162, 235, 0.9)",data:[]},{label:"Fiber",backgroundColor:"rgba(255, 206, 86, 0.9)",data:[]},{label:"Other",backgroundColor:"rgba(75, 192, 192, 0.9)",data:[]},{label:"FW",backgroundColor:"rgba(153, 102, 255, 0.9)",data:[]}]},0!==$("#chartTech").length&&a!==d.FIPS&&(d.FIPS=a,d.getTech())},getTech:function(){var a="/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_refresh_county&maxFeatures=100&outputFormat=application/json&cql_filter=county_fips=%27"+d.FIPS+"%27";$.ajax({type:"GET",url:a,success:function(a){d.update(a),d.display()}})},update:function(a){function b(a){for(i=0;i<d.data.labels.length;i++)g="tech_"+e[h]+"_"+i,f[h].data.push((100*c[g]).toFixed(2))}var c=a.features[0].properties,e=["adsl","cable","fiber","other","fw"],f=d.data.datasets,g="",h=0,i=0;for(h=0;h<e.length;h++)b(e)},display:function(){var a;$("#chartTech").replaceWith('<canvas id="chartTech" width="350" height="220"></canvas>'),$(".chartjs-hidden-iframe").remove(),a=$("#chartTech"),d.chart=new Chart(a,{type:"bar",data:d.data,options:{legend:{labels:{boxWidth:20}},responsive:!1,scales:{xAxes:[{scaleLabel:{stacked:!0,display:!0,labelString:"# of Providers"}}],yAxes:[{scaleLabel:{stacked:!0,display:!0,labelString:"% Population"}}]},tooltips:{callbacks:{title:function(a,b){return"# of Providers: "+a[0].xLabel},label:function(a,b){return b.datasets[a.datasetIndex].label+": "+a.yLabel+"%"}}}}})}};b.exports=d},{}],7:[function(a,b,c){"use strict";var d=a("./validate.js"),e={params:{},hasHash:function(){return!!window.location.hash},get:function(a){var b=decodeURIComponent(location.hash),c=b.match(/lat=([^&]+)/i),e=b.match(/lon=([^&]+)/i),f=b.match(/zoom=([^&]+)/i);null!==c&&null!==e&&null!==f&&d.coord(c[1],e[1],f[1])?(a.lat=c[1].replace(/\+/g,"%20"),a.lon=e[1].replace(/\+/g,"%20"),a.zoom=f[1].replace(/\+/g,"%20")):(a.lat=a.lat,a.lon=a.lon,a.zoom=a.zoom)},update:function(a){a.zoom=a.map.getZoom(),e.params.lat=a.lat,e.params.lon=a.lon,e.params.zoom=a.zoom,window.location.hash=$.param(e.params)},change:function(a){e.get(a)}};b.exports=e},{"./validate.js":18}],8:[function(a,b,c){"use strict";var d={};d["Fixed broadband 25/3 (Mbps)"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_county_layer_fixed",styles:"bpr_layer_fixed_1",color:"#FFE773",zIndex:11},d["No fixed broadband 25/3 (Mbps)"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_county_layer_nonfixed",styles:"bpr_layer_fixed_0",color:"#6CBCD5",zIndex:12},b.exports=d},{}],9:[function(a,b,c){"use strict";var d={};d["No fixed 25 Mbps/3 Mbps providers"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_numprov_0",styles:"bpr_dec2016_numprov_0",color:"#ffffcc",zIndex:11},d["One fixed 25 Mbps/3 Mbps provider"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_numprov_1",styles:"bpr_dec2016_numprov_1",color:"#fdcc8a",zIndex:12},d["Two fixed 25 Mbps/3 Mbps providers"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_numprov_2",styles:"bpr_dec2016_numprov_2",color:"#fc8d59",zIndex:13},d["Three or more fixed 25 Mbps/3 Mbps providers"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_numprov_3",styles:"bpr_dec2016_numprov_3",color:"#d7301f",zIndex:14},b.exports=d},{}],10:[function(a,b,c){"use strict";var d={};d["No residential services at 200 kbps or above"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_speedlt200",styles:"bpr_dec2016_speedlt200",color:"#ffffcc",zIndex:10},d["Residential services of at least 200 kbps"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_speed200",styles:"bpr_dec2016_speed200",color:"#c7e9b4",zIndex:11},d["Residential broadband of at least 10 Mbps/1 Mbps"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_speed10",styles:"bpr_dec2016_speed10",color:"#7fcdbb",zIndex:12},d["Residential broadband of at least 25 Mbps/3 Mbps"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_speed25",styles:"bpr_dec2016_speed25",color:"#bdd7e7",zIndex:13},d["Residential broadband of at least 50 Mbps/5 Mbps"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_speed50",styles:"bpr_dec2016_speed50",color:"#3182bd",zIndex:14},d["Residential broadband of at least 100 Mbps/10 Mbps"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_speed100",styles:"bpr_dec2016_speed100",color:"#08306b",zIndex:15},b.exports=d},{}],11:[function(a,b,c){"use strict";var d={};d["No fixed 25 Mbps/3 Mbps providers"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_numprov_0",styles:"bpr_dec2016_numprov_0",color:"#ffffcc",zIndex:11},d.FTTP={format:"image/png",transparent:!0,layers:"bpr_dec2016_tech_fiber",styles:"bpr_dec2016_tech",color:"#6e016b",zIndex:11},d["Cable modem"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_tech_cable",styles:"bpr_dec2016_tech",color:"#6e016b",zIndex:12},d["DSL (inc. FTTN), other copper"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_tech_adsl",styles:"bpr_dec2016_tech",color:"#6e016b",zIndex:13},d["Fixed wireless"]={format:"image/png",transparent:!0,layers:"bpr_dec2016_tech_fw",styles:"bpr_dec2016_tech",color:"#6e016b",zIndex:14},d.Other={format:"image/png",transparent:!0,layers:"bpr_dec2016_tech_other",styles:"bpr_dec2016_tech",color:"#6e016b",zIndex:15},b.exports=d},{}],12:[function(a,b,c){"use strict";var d=a("./map.js"),e={init:function(){$("#btn-locSearch").on("click","button",e.locChange),$("#btn-coordSearch").on("click","button",e.search_decimal),$("#btn-geoLocation").on("click",e.geoLocation),$("#btn-nationLocation").on("click",function(){d.map.setView([50,-105],3)}),$("#input-search-switch").on("click","a",e.search_switch),$("#location-search").autocomplete({source:function(a,b){function c(a,c){for(var d=c.results.features,e=[],f=0;f<d.length;f++)e.push(d[f].place_name);b(e)}var e=a.term;d.geocoder.query(e,c)},minLength:3,select:function(a,b){setTimeout(function(){e.locChange()},200)},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}}).keypress(function(a){var b=a.which;13===b&&e.locChange()}),$("#latitude, #longitude").keypress(function(a){var b=a.which;13===b&&e.search_decimal()})},locChange:function(){function a(a,b){return 0===b.results.features.length?void alert("The address provided could not be found. Please enter a new address."):(d.lat=b.latlng[0],d.lon=b.latlng[1],void d.getCounty(d.lat,d.lon))}var b=$("#location-search").val();return""===b?void alert("Please enter a valid address."):void d.geocoder.query(b,a)},search_decimal:function(){return d.lat=$("#latitude").val().replace(/ +/g,""),d.lon=$("#longitude").val().replace(/ +/g,""),""===d.lat||""===d.lon?void alert("Please enter a valid latitude and longitude."):d.lat.match(/^-?\d+\.?\d*$/)&&d.lon.match(/^-?\d+\.?\d*$/)?Math.abs(d.lat)>90||Math.abs(d.lon)>180?void alert("Latitude or longitude value is out of range."):void d.getCounty(d.lat,d.lon):void alert("Invalid latitude or longitude value.")},geoLocation:function(){return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var b=a.coords.latitude,c=a.coords.longitude;a.coords.accuracy;d.lat=Math.round(1e6*b)/1e6,d.lon=Math.round(1e6*c)/1e6,d.getCounty(d.lat,d.lon),setTimeout(function(){d.getBlock(d.lat,d.lon)},200)},function(a){alert("Sorry, your current location could not be determined. \nPlease use the search box to enter your location.")}):alert("Sorry, your current location could not be determined. \nPlease use the search box to enter your location."),!1},search_switch:function(a){var b=$(a.currentTarget).data("value");a.preventDefault(),"loc"===b?($("#coord-search, #btn-coordSearch").addClass("hide"),$("#location-search, #btn-locSearch").removeClass("hide"),$("#latitude, #longitude").val(""),$("#btn-label").text("Address")):"latlon-decimal"===b&&($("#coord-search, #btn-coordSearch").removeClass("hide"),$("#location-search, #btn-locSearch").addClass("hide"),$("#location-search").val(""),$('[data-value="latlon-decimal"]').find(".hidden-sm").is(":visible")?$("#btn-label").text("Coordinates"):$("#btn-label").text("Coord."))}};b.exports=e},{"./map.js":13}],13:[function(a,b,c){"use strict";var d,e,f,g,h=a("./hash.js"),i=a("./table-providers.js"),j=a("./table-demographics.js"),k=a("./chart-demographics.js"),l=a("./chart-fixed.js"),m=a("./chart-fixedNationwide.js"),n=a("./chart-tech.js"),o=a("./chart-speed.js"),p={deployment:a("./layers-deployment.js"),speed:a("./layers-speed.js"),providers:a("./layers-providers.js"),technology:a("./layers-tech.js"),tribal:{format:"image/png",transparent:!0,layers:"bpr_tribal",styles:"bpr_tribal",zIndex:19},urban:{format:"image/png",transparent:!0,layers:"fcc:bpr_county_layer_urban_only",styles:"bpr_layer_urban",zIndex:20}},q={color:"#00f",opacity:.5,fillOpacity:.1,fillColor:"#fff",weight:3},r={features:[]},s={color:"#000",opacity:.5,fillOpacity:.1,fillColor:"#fff",weight:3},t={init:function(){t.mapLayer={},t.lat=38.82,t.lon=-94.96,t.zoom=4,$(window).on("hashchange",h.change),h.change(t),t.createMap(),t.map.on("click",t.update),t.map.on("zoomend",function(){h.update(t)}),h.hasHash()&&(t.getCounty(t.lat,t.lon),t.hashZoom=!0),$(".control-full").on("click","a",function(a){a.preventDefault(),a.stopPropagation(),$("header .container, header .container-fluid, main").toggleClass("container container-fluid").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t.map.invalidateSize(),$("#table-providers").DataTable().columns.adjust().draw()})})},createMap:function(){var a,b=15,c=3,d={},e=window.page;t.mapLayer={},t.geoURL=window.GEOHOST+"/gwc/service/wms?tiled=true",L.mapbox.accessToken="pk.eyJ1IjoiY29tcHV0ZWNoIiwiYSI6InMyblMya3cifQ.P8yppesHki5qMyxTc2CNLg",t.map=L.mapbox.map("map-container","fcc.k74ed5ge",{attributionControl:!0,maxZoom:b,minZoom:c,zoomControl:!0}).setView([t.lat,t.lon],t.zoom),t.map.attributionControl.addAttribution('<a href="http://fcc.gov">FCC</a>'),d.Street=L.mapbox.tileLayer("fcc.k74ed5ge").addTo(t.map),d.Satellite=L.mapbox.tileLayer("fcc.k74d7n0g"),d.Terrain=L.mapbox.tileLayer("fcc.k74cm3ol");for(var f in p[e])t.mapLayer[f]=L.tileLayer.wms(t.geoURL,p[e][f]).setZIndex(p[e][f].zIndex).addTo(t.map);t.mapLayer.Tribal=L.tileLayer.wms(t.geoURL,p.tribal).setZIndex(p.tribal.zIndex),t.mapLayer.Urban=L.tileLayer.wms(t.geoURL,p.urban).setZIndex(p.urban.zIndex),a=L.control.layers(d,{},{position:"topleft"}).addTo(t.map),t.geocoder=L.mapbox.geocoder("mapbox.places-v1"),t.createLegend(e),m.init(),h.hasHash()===!1&&o.init("nw"),$(".leaflet-control-zoom-in, .leaflet-control-zoom-out").click(function(){h.update(t)})},createLegend:function(a){var b="",c=0;for(var d in p[a])b+="<li>",b+='<input id="chk'+c+'" type="checkbox" data-layer="'+d+'" checked> ',b+='<div class="key-symbol" style="background-color:'+p[a][d].color+'"></div> ',b+='<label for="chk'+c+'">'+d+"</label>",b+="</li>",c++;$(".map-legend").find("ul").prepend(b).end().on("click","[type=checkbox]",function(){var a=$(this).attr("data-layer");this.checked?t.mapLayer[a].addTo(t.map):t.map.removeLayer(t.mapLayer[a])}),$("#btn-closeLegend").on("click",function(a){a.preventDefault(),a.stopPropagation(),$(".map-legend").hide("fast")}),$("#btn-openLegend").on("click",function(a){a.preventDefault(),a.stopPropagation(),$(".map-legend").show("fast")})},update:function(a){t.lat=Math.round(1e6*a.latlng.lat)/1e6,t.lon=Math.round(1e6*a.latlng.lng)/1e6,t.getCounty(t.lat,t.lon)},getCounty:function(a,b){var c=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=fcc:bpr_dec2016_county&maxFeatures=1&outputFormat=application/json&cql_filter=contains(geom,%20POINT("+b+"%20"+a+"))";$.ajax({type:"GET",url:c,success:t.showCounty})},showCounty:function(a){var b;if(0===a.features.length)return void alert("No county data found at the seleted location. Please select a new location.");b=a.features[0].properties,$("#tabInstructs").is(":visible")&&($("#tabInstructs, #nwFixed").addClass("hide"),$("#fixed, #provider, #demographics").removeClass("hide"));var c=a.features[0].id.replace(/\..*$/,"");"bpr_dec2016_county"===c&&(t.map.hasLayer(e)&&t.map.removeLayer(e),e=L.mapbox.featureLayer(a).setStyle(q).addTo(t.map),t.hashZoom?(t.map.setView([t.lat,t.lon],t.zoom),t.hashZoom=!1):0!==r.features.length&&r.features[0].properties.county_fips===a.features[0].properties.county_fips||t.map.fitBounds(e.getBounds()),e.on("click",function(a){t.update(a)}),r=a,t.getBlock(t.lat,t.lon),j.create(b),k.create(b),l.init(b.county_fips),n.init(b.county_fips),o.init(b.county_fips))},getBlock:function(a,b){var c=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016&maxFeatures=100&outputFormat=application/json&cql_filter=contains(geom,%20POINT("+b+"%20"+a+"))";$.ajax({type:"GET",url:c,success:t.showBlock})},showBlock:function(a){var b=a.features[0].properties;g=a,t.map.hasLayer(f)&&t.map.removeLayer(f),f=L.mapbox.featureLayer(g).setStyle(s).addTo(t.map),t.setLocationMarker(t.lat,t.lon),$("[data-fips]").text(b.block_fips),$("[data-rural]").text("R"===b.urban_rural?"Rural":"Urban"),i.getData(b.block_fips),h.update(t)},setLocationMarker:function(a,b){t.map.hasLayer(d)&&t.map.removeLayer(d),d=L.marker([a,b],{title:""}).addTo(t.map),d.on("click",function(a){t.zoomToBlock()})},zoomToBlock:function(){t.map.hasLayer(f)&&t.map.fitBounds(f.getBounds())}};b.exports=t},{"./chart-demographics.js":2,"./chart-fixed.js":3,"./chart-fixedNationwide.js":4,"./chart-speed.js":5,"./chart-tech.js":6,"./hash.js":7,"./layers-deployment.js":8,"./layers-providers.js":9,"./layers-speed.js":10,"./layers-tech.js":11,"./table-demographics.js":14,"./table-providers.js":16}],14:[function(a,b,c){"use strict";var d=a("./utility.js"),e={create:function(a){var b={county_name:a.county_name,state_abbr:a.state_abbr,pop2015:a.pop2015,popdensity:a.popdensity,percapinc:a.percapinc,unspop25_3:a.unspop25_3,per_urbannofixed:a.per_urbannofixed,per_ruralnofixed:a.per_ruralnofixed};for(var c in b)d.isNull(b[c])&&(b[c]="");$("[data-county]").text(b.county_name),$("[data-state]").text(b.state_abbr),$("[data-totalPop]").text(d.formatComma(b.pop2015)),$("[data-popDensity]").text(d.formatComma(b.popdensity)),$("[data-incomeCapita]").text(d.formatComma(b.percapinc)),$("[data-totalPopNoAccess]").text(d.formatComma(b.unspop25_3)),$("[data-urbanPop]").text(d.formatPercent(b.per_urbannofixed)),$("[data-ruralPop]").text(d.formatPercent(b.per_ruralnofixed))}};b.exports=e},{"./utility.js":17}],15:[function(a,b,c){"use strict";var d=a("./utility.js"),e=[{data:"avepop",width:"20%"},{data:"avedensity",width:"20%"},{data:"percapita",width:"20%"},{data:"household",width:"20%"},{data:"poverty",width:"20%"}],f={getData:function(a){function b(){var a=$("#table-nwAve").find("tbody>tr");a.each(function(a,b){$(b).hasClass("odd")?$(b).prepend('<th class="rowHeading">Without Access</th>'):$(b).prepend('<th class="rowHeading">With Access</th>')}),a.eq(0).before('<tr><th colspan="7" scope="col">United States (All Areas)</th></tr>'),a.eq(1).after('<tr><th class="subHeading" colspan="7" scope="row">Rural Areas</th></tr>'),a.eq(3).after('<tr><th class="subHeading" colspan="7" scope="row">Urban Areas</th></tr>'),a.eq(5).after('<tr><th colspan="7" scope="col">Tribal Lands</th></tr>'),a.eq(7).after('<tr><th class="subHeading" colspan="7" scope="row">Rural Areas</th></tr>'),a.eq(9).after('<tr><th class="subHeading" colspan="7" scope="row">Urban Areas</th></tr>'),a.eq(11).after('<tr><th colspan="7" scope="col">U.S. Territories</th></tr>'),a.eq(13).after('<tr><th class="subHeading" colspan="7" scope="row">Rural Areas</th></tr>'),a.eq(15).after('<tr><th class="subHeading" colspan="7" scope="row">Urban Areas</th></tr>')}var c=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=bpr_dec2016_nw_average&maxFeatures=100&outputFormat=application/json";$("#table-nwAve").DataTable({ajax:{url:c,complete:b,dataSrc:f.create},bSort:!1,columns:e,destroy:!0,info:!1,paging:!1,searching:!1})},create:function(a){function b(a){for(g={},i=0;i<a.length;i++){var b=j[h]+"_"+a[i],f=e[i].data;"percap_w"===a[i]||"percap_wo"===a[i]||"hinc_w"===a[i]||"hinc_wo"===a[i]?g[f]="$"+d.formatComma(c[b].toFixed(2)):"povrat_w"===a[i]||"povrat_wo"===a[i]?g[f]=d.formatComma(c[b].toFixed(2))+"%":g[f]=d.formatComma(c[b].toFixed(2))}}var c=a.features[0].properties,f=[],g={},h=0,i=0,j=["us_avg","us_rural_avg","us_urban_avg","tribal_avg","tribal_rural_avg","tribal_urban_avg","terr_avg","terr_rural_avg","terr_urban_avg"],k=["pop_w","popden_w","percap_w","hinc_w","povrat_w"],l=["pop_wo","popden_wo","percap_wo","hinc_wo","povrat_wo"];for(h=0;h<j.length;h++)b(l),f.push(g),b(k),f.push(g);return f}};b.exports=f},{"./utility.js":17}],16:[function(a,b,c){"use strict";var d={getData:function(a){var b=window.GEOHOST+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=fcc:bpr_dec2016_providers&maxFeatures=100&outputFormat=application/json&cql_filter=block_fips=%27"+a+"%27";$("#table-providers").DataTable({ajax:{url:b,dataSrc:d.create},columns:[{data:"providerName"},{data:"tech"},{data:"speedDown"},{data:"speedUp"}],destroy:!0,info:!1,order:[[0,"asc"]],paging:!1,searching:!1,scrollY:"280px",scrollCollapse:!0}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){"#provider"===$(a.target).attr("href")&&$("#table-providers").DataTable().columns.adjust().draw()})},create:function(a){for(var b=a.features,c=[],d=0;d<b.length;d++)c.push({providerName:b[d].properties.dbaname,tech:b[d].properties.technology,speedDown:b[d].properties.download_speed,speedUp:b[d].properties.upload_speed});return c}};b.exports=d},{}],17:[function(a,b,c){"use strict";var d={isNull:function(a){return null===a},formatComma:function(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")},formatPercent:function(a){return(100*a).toFixed(2)+"%"}};b.exports=d},{}],18:[function(a,b,c){"use strict";var d={coord:function(a,b,c){var d=c;return""!==a&&""!==b&&(!(!a.match(/^-?\d+\.?\d*$/)||!b.match(/^-?\d+\.?\d*$/))&&(!(Math.abs(a)>90||Math.abs(b)>180)&&!(d>15||d<3||isNaN(d))))}};b.exports=d},{}]},{},[1]);